

# OSI 7 계층
   정의    
      네트워크에서 통신이 일어나는 과정을 7단계로 나눈것  
   
   나눈 이유 
      통신이 일어나는 과정을 단계별로 파악할 수 있기 떄문에   
      이상이 생기면 문제가 발생한 단계만 고치면 되기 때문에    

   # 1.물리 계층(Physical)
      두 대의 컴퓨터가 통신하려면?  
         0과 1만 주고받을 수 있으면 된다.    
         +5v에는 0 -5v에는 1 을 주면 통신 가능    
      0과 1을 아날로그 신호로 바꿔서 전선으로 전송한다.   
      Encoding: 0과 1의 나열을 아날로그 신호로 
      Decoding: 아날로그 신호를 0과 1로

    결론 : 물리적으로 연결된 컴퓨터가 0과 1의 나열을 주고받을 수 있게 해주는 모듈   
   
   여러 컴퓨터 간의 통신 ????    
        전선 하나를 가지고 여러 대의 컴퓨터와 통신을 해야할 방법을 찾아야 한다.   
        허브(스위칭 허브)에 여러대의 컴퓨터를 연결해서 서브넷을 만든다.(그 위에 라우터가 존재)      
        라우터(공유기)로 여러대의 허브를 묶는다.라우터는 서로 다른 서브넷에 속한 컴퓨터 끼리 통신이 가능하게 도와준다.  
        여러개의 라우터 모두 연결한 것을 '인터넷' 이라고 한다.        
        

  # 2.DataLink Layer(데이터 링크 계층)     
    여러대의 컴퓨터가 어떻게 데이터를 주고받을까?????       
        여러 컴퓨터가 허브(스위칭 허브)로 동시에 나의 컴퓨터로 데이터를 보냈다고 가정하자  
        어떻게 끊어서 읽을까...?     
        송신자는 데이터 앞 뒤에 특정한 비트열을 붙인다.이를 Framing라고 한다. 
    
    전송단위 : Frame
    결론 :같은 네트워크에 있는 여러 대의 컴퓨터들이 데이터를 주고받기 위해서 필요한 모듈 (랜카드)

  # 3.Network Layer 
        A와 B가 소통하려고 한다 이는 어떻게 가능할까??
        1.A가 B의 IP주소를 알고 있다고 가정하자.  
        2.A는 데이터 앞에 목적지의( IP주소 + 데이터 )패킷을 전송 한다.        
        3.허브는 패킷을 확인해서 모르는 IP주소라면 라우터에게 패킷을 전달한다.          
        4.라우터는 패킷을 확인해서 IP주소를 보고 라우팅 목적지를 결정해준다.        
            4-1.여기서 어떻게 라우팅할까??         
        5.이 패킷을 전달받은 라우터는 패킷을 확인해서 허브로 패킷을 전달한다.           
        6.허브는 일치하는 IP주소로 패킷을 전달한다   
    
       전송 단위: Packet
       ip + port + data     
       os의 커널에 구현되어 있다. 
       결론 : 어딘가에 있는 목적지 컴퓨터로 데이터를 전송하기 위해 IP주소를 이용해서 길을 찾고(routing) 다음 라우터에게 패킷을 넘겨주는것(forwarding)을 수행한다    
        
  # 4.Transport Layer(전송계층)  
        컴퓨터에서 여러개의 프로세스가 있다고 생각하자.  
        컴퓨터는 어떻게 프로세스를 식별할까?    
            포트번호로 식별한다!!!!!!!!!!!   
            포트번호는 하나의 컴퓨터에서 동시에 실행되고 있는 프로세스들이 서로 겹치지 않게 가져야하는 값이다  
        그럼 송신자는 어떻게 데이터를 보낼까??      
            수신자 컴퓨터에 있는 프로세스의 포트 번호를 붙여서 보내준다!!!    
            그럼 전송자는 IP주소와 PORT번호까지 모두 알아야 한다.    
        
       전송단위 : Segment
       TCP 프로토콜이 여기에 속한다 
       port + data  
       os의 커널에 구현되어 있다.
       결론: 포트 번호를 사용하여 도착지 컴퓨터의 최종 도착지인 프로세스에 까지 데이터가 도달하게 하는 모듈        

=======건너 뛰기 ( Session,Presentation Layer) =====      
왜??     
    현대의 인터넷은 OSI모델이 아니라 TCP/IP 모델을 따르고 있다.
    TCP/IP모델도 OSI모델과 마찬가지로 네트워크 시스템에 대한 모델이다. 
    업데이트 된 TCP/IP 모델은 Application,Presentation,Session 계층을 묶어서 Application게층으루 퉁친다.     
    나머지는 동일하다.   

 #  5.Application Layer
        우리가 사용하는 인터페이스를 제공한다.
        HTTP,FTP가 여기에 속한다.
        TCP/IP 소켓 프로그래밍
            운영체제의 Transport Layer에서 제공하는 API를 활용해서 통신 가능한 프로그램을 
            만드는것을 TCP/IP 소켓 프로그래밍, 네트워크 프로그래밍 이라고 한다.   
    

MVC 패턴과 마찬가지로 소프트웨어 아키텍처 중에 Layered 아키텍처가 있다.       
Layered 아키텍처를 따르는 대표적인 예가 네트워크 시스템이다.   
즉 네트워크 시스템은 하나의 커다란 소프트웨어이다.   
그럼 OSI 7 Layer는 거대한 네트워크 소프트웨어의 구조를 설명하는 것이다.




# TCP 접속과정 (3 WAY)
   1.클라이언트 > SYN 을 설정해서 접속 요청을 보낸다  
   2.서버 > 잘 받았다고 ACK를 설정하고 SYN을 설정해서 보낸다    
   3.클라이언트 > 잘 받았다고 SYN을 설정해서 보낸다

# TCP종료 과정(4 WAY)   
   1.클라이언트 > FIN을 설정해서 보낸다,그리고 FIN_WAIT_1 상태가 된다    
   2.서버 > 잘 받았다고 ACK를 설정해서 보낸다,그리고 CLOSE_WAIT 상태가 된다    
   3.클라이언트 > 받으면 FIN_WAIT_2상태가 된다.      
   4.서버 > 서버에서 FIN 을 설정해서 보낸다 ,그리고 LASK_ACK 상태가 된다.     
   5.클라이언트 > FIN을 받으면 TIME_WAIT 상태가 되어서 지연되거나 유실된 패킷을 기다린다.         
   6.클라이언트 > TIME_WAIT시간이 지나면 서버로 ACK를 설정해서 보내고 CLOSE 상태가 된다.        
   7.서버 > ACK를 확인하고 SOCKET을 CLOSE 상태가 된다            
        
